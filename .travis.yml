# stats available at
# https://travis-ci.org/strukturag/libheif/
language: cpp
compiler:
  - clang
  - gcc
os:
  - osx
  - linux
dist: bionic
cache:
  directories:
    - '$HOME/.sonar/cache'
addons:
  apt:
    update: true
  sonarcloud:
    organization: "cartoonfan"
    token: 
      secure: "JhCTfgEppIaIYJVhc8SfNNT1ZgENa1V5eH079Azubgc6lHZlppqOvlEUlQKUpPT3I/rFO8dCib7o9RCnl6B37EwSvCRaQ1edYnSvfrprm1kOLOY5cYjQtvPN3XyZkhN+4Q3VSHU22sENua+6AN+FV6V1Xe7RBP5HwR3OSgp3w8uc+Wmt4U9lJ1AbJOzfT0R6ZlgWpZfQ7kkInfULGz/q2sv1mbHk5F8dZHgVxgF3AjVocfdXAfaX56ifHAm0tQDg8bmOuPUuMBsael9ocegDwtm9ap+U6SE61NqtwDC0XYrXrWWGNndiKYJlUfSoiyfgC3TelowT/VJ2wudvNUJS1WTVah/0BnoGR6NZMbdmKrV7QcbViAZXRfA6UQ4Zrt21nBGUNyCocJg5GDbL8C0aNLkaFejWFBEPdCmPSyGfhW5z/sD7TpFPzKhTM90ouKxyIagPgaVA87zrA4w9nl/Be+d5rI2Hu9WSFs2Bk3rx6rJM/twdLmlRJUuzhBtB39pmuDMFqdodzpD8XgNiQafnCvdFNRwRoUr5dDcRKxe2vwUKxmLJctUMa7f51cvmwqe13vx0RA9cSQMGPSTADwfAPY9LRQWVxsJ+2f1w/rYpemIgfoKgddhoQ17jCqyY18Jo4VJvYI/n6zATE1bMRPW/h2/Eqn+7+75ASWsKU2JXuyc="

before_install:
- git fetch --unshallow

script:
  # Prepare the build system
  - mkdir build
  - cd build
  - cmake ..
  - cd ..
  # Wraps the compilation with the Build Wrapper to generate configuration (used
  # later by the SonarQube Scanner) into the "bw-output" folder
  - if [ $TRAVIS_OS_NAME = osx ]; then build-wrapper-macosx-x86 --out-dir bw-output cmake --build build/; else build-wrapper-linux-x86-64 --out-dir bw-output cmake --build build/; fi
  # And finally run the SonarCloud analysis - read the "sonar-project.properties"
  # file to see the specific configuration
  - sonar-scanner
